<!DOCTYPE html>

<html lang="es">
    
    <%- include('../partials/head', {title: 'Editar producto', estilo:'/stylesheets/form-style.css'}) %>

    <body>
        
        <%- include('../partials/header') %>

        <main>
            
      
           
            <form action="/products/edit/<%= product.id %>?_method=PUT" method="post" enctype="multipart/form-data" id="form">
                    
                <div>         
                    <h2 class="products-title">Estás editando: <i><%= product.name %></i></h2> 
                    </div>
                <!-- errores -->
                <section class="errores">
                    <ul>
                        
                    </ul>
                </section>
                <!-- name -->
                <div class="campo">
                    <label for="name" class="form-label">Nombre:</label>
                    <input type="text" name="name" id="name" value="<%= product.name %>">
                    <span class="feedback"></span>
                </div>
                <!-- description -->
                <div class="campo">
                    <label for="description" class="form-label">Descripción: </label>
                    <textarea  name="description" id="description" ><%= product.description %> </textarea>
                    <span class="feedback"></span>
                </div>
                 <!-- price -->
                 <div class="campo">
                    <label for="price" class="form-label">Precio:</label>
                    <input type="number" name="price" id="price" placeholder="<%= product.price %>" value="<%= product.price %>">
                    <span class="feedback"></span>
                </div>
                <!-- discount -->
                <div class="campo">
                    <label for="price" class="form-label">Descuento:</label>
                    <input type="number" name="discount" id="discount" placeholder="<%= product.discount %>" value="<%= product.discount %>">
                    <span class="feedback"></span>
                </div>
                <!-- category -->
                <div class="campo">
                    <label for="category_id" class="form-label">Categoría: </label>
                    <select name="category_id" id="category_id" class="form-input">
                       
                        <option value="<%= product.category_id %>"><%= product.categorys.nombre %></option>
                       
                        <% for (i=0; i < allCategorys.length;i++) { %>
                        <option value="<%= allCategorys[i].id %>"><%= allCategorys[i].nombre %></option>
                        <% } %>

                    </select>
                </div>
                   
                </div>
                 <!-- Talle -->
                <div class="campo">
                   
                    <% if(product.category_id == 1){%>
                    <label for="talle_id" class="form-label">Talle: </label>
                    <select name="talle_id" id="talle_id" class="form-input">
                        <option value="<%= product.talle_id %>"><%= product.talles.nombre %></option>
                
                        <!-- cuando se arrgler poder llmar una 4 db poner la funcion -->
                    <% } %>

                    </select>
                </div>
                    <!-- marca -->
                <div class="campo">
                    <label for="marca_id" class="form-label">Marca: </label>
                    <select name="marca_id" id="marca_id" class="form-input">
                        <option value="<%= product.marca_id %>"><%= product.marcas.nombre %></option>
                       
                        <% for (i=0; i < allMarcas.length;i++) { %>
                            <option value="<%= allMarcas[i].id %>"><%= allMarcas[i].nombre %></option>
                         <% } %>
                        </select>
                </div>
                <!-- stock -->
                <div class="campo name">
                    <label for="stock" class="form-label">Stock: </label>
                    <input type="number" name="stock" id="stock" placeholder="<%= product.stock %>" value="<%= product.stock %>" >
                    <span class="feedback"></span>
                </div>

                <!-- image -->
                <div class="foto add">
                    <img src="/images/products/<%= product.image %>" alt="product image" class="product-detail-img">
                </div>
                <div class="campo">
                    <label for="image" class="form-label">Imagen: </label>
                    <input  type="file" name="image" id="image"  >
                    <span class="feedback"></span>
                </div>

                <div class="botones">
                    <button type="submit">Guardar</button>
                    <button type="reset" >Borrar</button>
                </div>
                <a href="/products/delete/<%= product.id %>" class="action-button edit">ELIMINAR PRODUCTO</a>
            </form>
        </main>

        <%- include('../partials/footer') %>
        <script src="/js/products/productsEdit.js"></script>
    </body>
</html>